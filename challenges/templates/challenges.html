{% extends 'base.html' %}
{% load filters %}
{% block page_title %}
    Challenges
{% endblock %}
{% block page_heading %}
    Challenges
{% endblock %}
{% block head_js %}
    <script>
        // handler for tooltips
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}
{% block main_content %}
    {# Tabbed Navigation for Challenges Page #}
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        {# Tab for Challenges user is member of  #}
        <li class="nav-item">
            <a class="nav-link active" id="member-tab" data-toggle="tab" href="#member" role="tab"
               aria-controls="profile"
               aria-selected="false">Member</a>
        </li>
        {# Tab for Challenges user is master of  #}
        <li class="nav-item">
            <a class="nav-link" id="master-tab" data-toggle="tab" href="#master" role="tab"
               aria-controls="master" aria-selected="true">Master</a>
        </li>
        {# Tab for Creating a challenge, button if user can, special content if user is at service level limit  #}
        <li class="nav-item">
            {% if owned_challenges and owned_challenges|length < owned_product.max_number_of_challenges %}
                {# Create Button #}
                <a class="nav-link" role="button" aria-controls="create" href="{% url 'create_challenge' %}"
                   aria-selected="false">Create</a>
            {% else %}
                {# Special Over limit content #}
                <a class="nav-link" id="create-tab" data-toggle="tab" href="#create" role="tab" aria-controls="create"
                   aria-selected="false">Create</a>
            {% endif %}
        </li>
    </ul>

    <div class="tab-content" id="myTabContent">
        {# Tab content for Challenges user is Member of #}
        {% include 'partials/member_content_tab.html' %}
        {# Tab content for Challenges user is Master of #}
        {% include 'partials/master_content_tab.html' %}


        {# Tab for Special content when user is at limit user is Master of #}
        <div class="tab-pane fade" id="create" role="tabpanel" aria-labelledby="create-tab">
            <p>You have the maximum number of challenges allowed. You can delete an existing one on the 'Master
                tab'.</p>
            {% if owned_product.name != "Interstellar" %}
                <p>Or you can <a href="{% url 'products' %}" class="btn primary">Upgrade</a> to a higher service level.
                </p>
            {% endif %}
        </div>
    </div>

{% endblock %}