{% load filters %}
{#  master content tab #}
<div class="tab-pane fade" id="master" role="tabpanel" aria-labelledby="master-tab">
    <div class="chg-header">You are the Master of {{ owned_challenges|length }}
        challenges.
    </div>
    {% for item in owned_challenges %}
        {# small devices layout #}
        <div class="challenge_wrap flex-grid hidden-tablet-up">
            <div class=" two-thirds">
                <div class="ch-title">
                    {{ item.name | title }}
                </div>
                <div class="ch-date">
                    {{ item.start_date | date }}
                    {% if item.start_date|date != item.end_date|date %}
                        - {{ item.end_date | date }}
                    {% endif %}
                </div>
            </div>
            {% if item.example_image %}
                <div class="one-third"
                     style="background: url({{ item.example_image.url }}); background-size: contain; background-repeat: no-repeat; width: 100%; min-height: 150px; margin-bottom: 10px;">
                </div>
            {% endif %}
            <div class="center">
                <a href="{% url 'update_challenge' id=item.id %}" class="btn primary"><i
                        class="fas fa-edit"></i> Edit</a>
            </div>
            <div class="center">
                <a href="{% url 'delete_challenge' id=item.id %}" class="btn primary"><i
                        class="fas fa-trash-alt"></i> Delete</a>
            </div>
            {% if item.get_submissions|length > 0 %}
                <div class="full">
                    <a href="{% url 'submissions' challenge_id=item.id %}" class="btn primary"><i
                            class="fas fa-eye"></i>
                        See Entries</a>
                </div>
            {% endif %}
        </div>
        {# tablet and above layout #}
        <div class="challenge_wrap flex-grid hidden-phone-down">
            <div class="full">
                <div class="ch-title ch-item">
                    {{ item.name | title }}
                </div>
            </div>
            <div>
                <div class="ch-date ch-item">
                    {{ item.start_date | date }}
                    {% if item.start_date|date != item.end_date|date %}
                        - {{ item.end_date | date }}
                    {% endif %}
                </div>
                <div class="center ch-item">
                    <a href="{% url 'update_challenge' id=item.id %}" class="btn primary"><i
                            class="fas fa-edit"></i> Edit</a>
                </div>
                <div class="center ch-item">
                    <a href="{% url 'delete_challenge' id=item.id %}" class="btn primary"><i
                            class="fas fa-trash-alt"></i> Delete</a>
                </div>
            </div>
            {% if item.example_video %}
                <div class="ch-vid-wrap ch-item">
                    <video width='auto' height="150px" controls>
                        <source src='{{ item.example_video.url }}' type='video/mp4'>
                        Your browser does not support the video tag.
                    </video>
                </div>
            {% endif %}
            {% if item.example_image %}
                <div class="ch-item {% if not item.example_video %}double{% endif %}"
                     style="background: url({{ item.example_image.url }}); background-size: contain;
                             background-repeat: no-repeat; {% if not item.example_video %}height: 200px; {% else %}height:150px;{% endif %}background-position: center;">
                </div>
            {% endif %}
            <div class="ch-item">
                <p>{{ item.get_members|length }} members</p>
                <p>{{ item.get_submissions|length }} submissions</p>

                {% if item.get_submissions|length > 0 %}
                    <a href="{% url 'submissions' challenge_id=item.id %}" class="btn primary"><i
                            class="fas fa-eye"></i>
                        See Entries</a>
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>