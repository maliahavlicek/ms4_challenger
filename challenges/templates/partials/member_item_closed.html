{% load filters %}
{# Content for member item that end_date is in past (closed) #}
{# small devices layout #}
<div class="challenge_wrap flex-grid hidden-tablet-up">
    <div class="full">
        <div class="ch-title">
            <h3>Challenge: <span class="norm-font">{{ item.name | title }}</span></h3>
        </div>
    </div>
    <div class="ch-half">
        <div class="ch-item ch-date">
            {{ item.start_date | date }}
            {% if item.start_date|date != item.end_date|date %}
                - {{ item.end_date | date }}
            {% endif %}
        </div>
        <div class="ch-item">
            {% if item.get_submissions|length > 0 %}
                <a href="{% url 'submissions' challenge_id=item.id %}" class="btn primary"><i
                        class="fas fa-eye"></i>
                    See Entries</a>
            {% else %}
                <p>This item is closed.</p>
            {% endif %}
        </div>
    </div>
    <div class="ch-half">
        <div class="ch-item">
            {% if item.example_image %}
                <img class="img-fluid mx-auto" src="{{ item.example_image.url }}"
                     alt="Example Submission Image for {{ item.name }}"/>
            {% endif %}
        </div>
    </div>

    {% if entry %}
        <div class="full">
            <div class="ch-item">
                <h3>Your Entry: <span class="norm-font">{{ entry.title|title }}</span></h3>
            </div>
            <div class="ch-item">
                Submitted on {{ entry.date_created|date }}
            </div>
            {% if entry.image_file %}
                <div class="ch-item"
                     style="background: url({{ entry.image_file.url }}); background-size: contain; background-repeat: no-repeat; width: 100%; min-height: 250px; margin-bottom: 10px;"></div>
            {% endif %}

            {% if entry.audio_file %}
                <div class="ch-audio-wrap ch-item">
                    <audio width='auto' height="50px" controls>
                        <source src='{{ entry.audio_file.url }}' type='audio/mp3'>
                        Your browser does not support the audio tag.
                    </audio>
                </div>
            {% endif %}

            {% if entry.video_file %}
                <div class="ch-vid-wrap ch-item">
                    <video width='auto' height="250px" controls>
                        <source src='{{ entry.video_file.url }}' type='video/mp4'>
                        Your browser does not support the video tag.
                    </video>
                </div>
            {% endif %}

            <div class="ch-item">
                {# include aggregate rating for this entry #}
                {% include 'aggregate_rating.html' with item=entry %}
            </div>
        </div>
    {% else %}
        <p>You did not submit an entry to this challenge.</p>
    {% endif %}
</div>
{# tablet and above layout #}
<div class="challenge_wrap member flex-grid hidden-phone-down">
    <div>
        <div class="ch-title ch-item">
            <h3>Challenge: <span class="norm-font">{{ item.name | title }}</span></h3>
        </div>
        <div class="ch-date ch-item">
            {{ item.start_date | date }}
            {% if item.start_date|date != item.end_date|date %}
                - {{ item.end_date | date }}
            {% endif %}
        </div>
        <div class="ch-item">
            {% if item.get_submissions|length > 0 %}
                <a href="{% url 'submissions' challenge_id=item.id %}" class="btn primary"><i
                        class="fas fa-eye"></i>
                    See Entries</a>
            {% else %}
                This item is closed.
            {% endif %}
        </div>
    </div>
    {% if item.example_video %}
        <div class="ch-vid-wrap ch-item">
            <video width='auto' height="150px" controls>
                <source src='{{ item.example_video.url }}' type='video/mp4'>
                Your browser does not support the video tag.
            </video>
        </div>
    {% endif %}
    <div {% if not item.example_video %}class="double"{% endif %}>
        {% if item.example_image %}
            <img class="img-fluid mx-auto" src="{{ item.example_image.url }}"
                 alt="Example Submission Image for {{ item.name }}"/>
        {% endif %}
    </div>
    {% if entry %}
        <div class="full">
            <div class="ch-item">
                <h3>Your Entry: <span class="norm-font">{{ entry.title|title }}</span></h3>
            </div>

            <div class="ch-item">
                {# include aggregate rating for this entry #}
                {% include 'aggregate_rating.html' with item=entry %}
            </div>
            <div class="ch-item">
                Submitted on {{ entry.date_created|date }}
            </div>
            {% if entry.image_file %}
                <div class="ch-item"
                     style="background: url({{ entry.image_file.url }}); background-size: contain; background-repeat: no-repeat; width: 100%; min-height: 250px; margin-bottom: 10px;"></div>
            {% endif %}

            {% if entry.audio_file %}
                <div class="ch-audio-wrap ch-item">
                    <audio width='auto' height="50px" controls>
                        <source src='{{ entry.audio_file.url }}' type='audio/mp3'>
                        Your browser does not support the audio tag.
                    </audio>
                </div>
            {% endif %}

            {% if entry.video_file %}
                <div class="ch-vid-wrap ch-item">
                    <video width='auto' height="250px" controls>
                        <source src='{{ entry.video_file.url }}' type='video/mp4'>
                        Your browser does not support the video tag.
                    </video>
                </div>
            {% endif %}
        </div>
    {% else %}
        <p>You did not submit an entry to this challenge.</p>
    {% endif %}
</div>